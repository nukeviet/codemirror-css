<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NukeViet CSS Editor based CodeMirror 6</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body class="p-4">
    <h1>NukeViet CSS Editor based CodeMirror 6</h1>
    <div id="editor" style="min-height: 300px;" class="border"></div>
    <div class="mt-3 hstack gap-2">
        <button type="button" id="toggleDir" class="btn btn-primary">Đổi hướng</button>
        <button type="button" id="toggleTheme" class="btn btn-primary">Đổi chế độ sáng tối</button>
        <button type="button" id="getValue" class="btn btn-primary">Lấy dữ liệu</button>
        <button type="button" id="setValue" class="btn btn-primary">Đặt dữ liệu</button>
    </div>
    <textarea rows="10" class="form-control mt-3" id="textareaValue"></textarea>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="../dist/css.bundle.js"></script>
    <script>
    let dark = false;
    let dir = 'ltr';
    const editor = new nukeviet.CSSEditor('#editor', {
        dark: dark
    });

    const btnColor = document.querySelector('#toggleTheme');
    btnColor.addEventListener('click', () => {
        dark = !dark;
        editor.setDarkMode(dark);
        console.log('Mode change to: ' + (dark ? 'dark' : 'light'));
    });

    const btnDir = document.querySelector('#toggleDir');
    btnDir.addEventListener('click', () => {
        if (dir == 'ltr') {
            dir = 'rtl';
        } else {
            dir = 'ltr';
        }
        document.querySelector('html').setAttribute('dir', dir);
        console.log('Dir change to: ' + dir);
    });

    const btnGet = document.querySelector('#getValue');
    btnGet.addEventListener('click', () => {
        document.querySelector('#textareaValue').value = editor.getValue();
    });

    const btnSet = document.querySelector('#setValue');
    btnSet.addEventListener('click', () => {
        editor.setValue("a {\n  color: #fff;\n}");
    });
  </script>
</body>

</html>
